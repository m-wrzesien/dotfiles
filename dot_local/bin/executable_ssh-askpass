#!/bin/bash

# Based on https://spencerkrum.com/posts/ssh-askpass-wayland/

TEXT="A PROGRAM REQUIRES AN AGENT.\nApprove?"
# Use text provided by ssh that has following format:
# Allow use of key <comment>?
# Key fingerprint <fingerprint>.
if [ -n "$1" ]; then
    TEXT="$1"
fi

# Fix problems with non-visible text in zenity on old graphic cards
# source: https://bbs.archlinux.org/viewtopic.php?pid=2159690#p2159690
export GSK_RENDERER=gl

/usr/bin/zenity --title ssh-askpass --question --text "$TEXT"
