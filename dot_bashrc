# ~/.bashrc
# shellcheck shell=bash

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# don't put lines starting with space and duplicate lines in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth:erasedups

# append to the history file, don't overwrite it
shopt -s histappend

# add date to history
HISTTIMEFORMAT="%F %T: "

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=100000
HISTFILESIZE=100000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# needs to be before other things, as otherwise aliases will have problem with overrides
if [ -f /opt/homebrew/bin/brew ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
    [[ -r "$HOMEBREW_PREFIX/etc/profile.d/bash_completion.sh" ]] && . "$HOMEBREW_PREFIX/etc/profile.d/bash_completion.sh"

    [ -s "$HOMEBREW_PREFIX/opt/nvm/nvm.sh" ] && \. "$HOMEBREW_PREFIX/opt/nvm/nvm.sh" # This loads nvm
    [ -s "$HOMEBREW_PREFIX/opt/nvm/etc/bash_completion.d/nvm" ] && \. "$HOMEBREW_PREFIX/opt/nvm/etc/bash_completion.d/nvm" # This loads nvm bash_completion

    [ -s "$HOMEBREW_PREFIX/bin/direnv" ] && eval "$(direnv hook bash)"
fi

sourceAliases() {
    local file=$1
    if [ -f "$file" ]; then
    # shellcheck source=/dev/null
        source "$file"
    fi
}

sourceAliases "$HOME/.bash_aliases"
# Aliases that are not part of dotfiles
sourceAliases "$HOME/.bash_aliases_local"


eval "$(fzf --bash)"
eval "$(starship init bash)"
